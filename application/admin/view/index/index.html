<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>后台 - Web编程课程教学案例智能分析软件</title>
    <link rel="stylesheet" href="/static/layui/css/layui.css">
    <link rel="stylesheet" href="/static/css/main.css">
    <style>
        body,
        html {
            width: 100%;
            height: 100%;
            margin: 0;
            background: #ebebeb;
        }
    </style>
</head>

<body>
    <ul class="layui-nav" lay-filter="">
        <li class="layui-nav-item layui-this"><a href="/admin">综合管理</a></li>
        <li class="layui-nav-item"><a href="javascript:;">添加案例</a></li>
    </ul>
    <div style="height: 50px;"></div>
    <div class="layui-container">
        <div class="layui-row layui-col-space10">
            <div class="layui-col-xs12 layui-col-sm12 layui-col-md6">
                <div class="layui-card">
                    <div class="layui-card-header">案例管理</div>
                    <div class="layui-card-body">
                        <table id="egm" lay-filter="egm"></table>
                    </div>
                </div>
            </div>
            <div class="layui-col-xs12 layui-col-sm12 layui-col-md6">
                <div class="layui-card">
                    <div class="layui-card-header">用户管理</div>
                    <div class="layui-card-body">
                        <table id="userm" lay-filter="userm"></table>
                    </div>
                </div>
            </div>
            <div class="layui-col-xs12 layui-col-sm12 layui-col-md6">
                <div class="layui-card">
                    <div class="layui-card-header">添加案例</div>
                    <div class="layui-card-body">
                        <form class="layui-form layui-form-pane" action="">
                            <div class="layui-form-item">
                                <label class="layui-form-label">注意</label>
                                <div class="layui-input-block">
                                    <input type="text" name="zy" readonly autocomplete="off" placeholder="先输入案例名 点击确认后选择要上传的文件"
                                        class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">案例名</label>
                                <div class="layui-input-block">
                                    <input type="text" name="name" autocomplete="off" placeholder="请输入案例名" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <button class="layui-btn" lay-submit="" lay-filter="addEg">确认添加</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="layui-col-xs12 layui-col-sm12 layui-col-md6">
                <div class="layui-card">
                    <div class="layui-card-header">添加用户</div>
                    <div class="layui-card-body">
                        <form class="layui-form layui-form-pane" action="">
                            <div class="layui-form-item">
                                <label class="layui-form-label">用户名</label>
                                <div class="layui-input-block">
                                    <input type="text" name="username" autocomplete="off" placeholder="请输入用户名" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">密码</label>
                                <div class="layui-input-block">
                                    <input type="text" name="password" autocomplete="off" placeholder="请输入密码" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <button class="layui-btn" lay-submit="" lay-filter="addUser">确认添加</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="/static/js/jquery.js"></script>
<script src="/static/layui/layui.js"></script>
<script src="/static/js/popup.js"></script>
<script src="/static/js/main.js"></script>
<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-xs" lay-event="detail">查看</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
<script type="text/html" id="barDemo2">
    <a class="layui-btn layui-btn-xs" lay-event="detail">修改密码</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
<script>
    layui.use(['table', 'form'], function () {
        var table = layui.table
        var form = layui.form

        table.render({
            elem: '#egm'
            , height: 400
            , url: '/api/admin/getEgs'
            , page: false
            , cols: [[
                { field: 'id', title: 'ID', width: '20%', sort: true, fixed: 'left' }
                , { field: 'name', title: '案例名', width: '40%' }
                , { fixed: 'right', width: '40%', align: 'center', toolbar: '#barDemo' }
            ]]
        })

        table.render({
            elem: '#userm'
            , height: 400
            , url: '/api/admin/getUsers'
            , page: false
            , cols: [[
                { field: 'id', title: 'ID', width: '20%', sort: true, fixed: 'left' }
                , { field: 'username', title: '用户名', width: '40%' }
                , { fixed: 'right', width: '40%', align: 'center', toolbar: '#barDemo2' }
            ]]
        })

        table.on('tool(egm)', function (obj) {
            var data = obj.data;
            var layEvent = obj.event;
            var tr = obj.tr;

            if (layEvent === 'detail') {
                // window.open('/pages/eg' + data.id, '_blank').location;
            } else if (layEvent === 'del') {
                layer.confirm('真的删除`' + data.username + '`么', function (index) {
                    // delEg(data.id);
                    obj.del();
                    layer.close(index);
                });
            }
        })

        form.on('submit(addUser)', function (data) {
            addUser(data.field.username, data.field.password)
            return false
        });

    })
</script>

</html>